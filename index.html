<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>SearchIt — AI Username Finder</title>
    <style>
      :root {
        color-scheme: dark;
        --bg: #0a0c14;
        --panel: #111625;
        --panel-soft: #171c2f;
        --muted: #9aa3b2;
        --text: #e7e9ef;
        --brand: #6ee7ff;
        --brand-2: #8b5cf6;
        --success: #38f2a7;
        --danger: #ff5f7a;
        --warning: #fbbf24;
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        min-height: 100vh;
        font-family: "Inter", "Segoe UI", system-ui, sans-serif;
        color: var(--text);
        background: radial-gradient(circle at top, #1a2340, var(--bg) 45%);
      }

      header {
        padding: 48px 8vw 24px;
      }

      .badge {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 6px 12px;
        border-radius: 999px;
        background: rgba(110, 231, 255, 0.15);
        color: var(--brand);
        font-size: 0.85rem;
        letter-spacing: 0.02em;
      }

      h1 {
        margin: 18px 0 12px;
        font-size: clamp(2.5rem, 4vw, 3.5rem);
      }

      .lead {
        max-width: 720px;
        color: var(--muted);
        font-size: 1.1rem;
        line-height: 1.6;
      }

      main {
        padding: 0 8vw 80px;
        display: grid;
        gap: 28px;
      }

      .search-panel {
        background: linear-gradient(145deg, var(--panel), #0d1222);
        border-radius: 24px;
        padding: 28px;
        display: grid;
        gap: 20px;
        box-shadow: 0 30px 60px rgba(7, 10, 24, 0.5);
      }

      .search-controls {
        display: grid;
        grid-template-columns: minmax(0, 1fr) auto;
        gap: 16px;
      }

      .search-controls input {
        width: 100%;
        padding: 14px 18px;
        border-radius: 14px;
        border: 1px solid transparent;
        background: var(--panel-soft);
        color: var(--text);
        font-size: 1rem;
      }

      .search-controls input:focus {
        outline: none;
        border-color: rgba(110, 231, 255, 0.6);
        box-shadow: 0 0 0 3px rgba(110, 231, 255, 0.15);
      }

      .search-controls button {
        padding: 14px 22px;
        border-radius: 14px;
        border: none;
        background: linear-gradient(135deg, var(--brand), var(--brand-2));
        color: #05070f;
        font-weight: 600;
        cursor: pointer;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
      }

      .search-controls button:hover {
        transform: translateY(-1px);
        box-shadow: 0 12px 20px rgba(110, 231, 255, 0.25);
      }

      .toggle-row {
        display: flex;
        flex-wrap: wrap;
        gap: 12px 18px;
        align-items: center;
        color: var(--muted);
        font-size: 0.95rem;
      }

      .toggle-row label {
        display: inline-flex;
        gap: 8px;
        align-items: center;
      }

      .metrics {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
        gap: 14px;
      }

      .metric-card {
        background: var(--panel-soft);
        padding: 18px;
        border-radius: 18px;
      }

      .metric-card span {
        display: block;
        color: var(--muted);
        font-size: 0.9rem;
      }

      .metric-card strong {
        font-size: 1.4rem;
      }

      .ai-panel {
        background: linear-gradient(160deg, rgba(110, 231, 255, 0.08), rgba(139, 92, 246, 0.08));
        border-radius: 20px;
        padding: 18px;
        display: grid;
        gap: 12px;
      }

      .ai-panel h3 {
        margin: 0;
        font-size: 1.1rem;
      }

      .ai-insights {
        margin: 0;
        padding-left: 18px;
        color: var(--muted);
        line-height: 1.5;
      }

      .results-panel {
        background: var(--panel);
        border-radius: 24px;
        padding: 24px;
        display: grid;
        gap: 18px;
      }

      .results-header {
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
      }

      .results-header h2 {
        margin: 0;
        font-size: 1.4rem;
      }

      .sort-controls {
        display: flex;
        gap: 10px;
        align-items: center;
        color: var(--muted);
      }

      .sort-controls select {
        padding: 8px 12px;
        border-radius: 10px;
        border: 1px solid rgba(154, 163, 178, 0.3);
        background: var(--panel-soft);
        color: var(--text);
      }

      .results-grid {
        display: grid;
        gap: 12px;
      }

      .result-card {
        display: grid;
        grid-template-columns: minmax(0, 1fr) auto;
        gap: 12px;
        background: #0c1122;
        border-radius: 16px;
        padding: 14px 18px;
        align-items: center;
        border: 1px solid rgba(255, 255, 255, 0.04);
      }

      .result-card h3 {
        margin: 0;
        font-size: 1rem;
      }

      .result-card p {
        margin: 4px 0 0;
        color: var(--muted);
        font-size: 0.9rem;
      }

      .status {
        padding: 6px 10px;
        border-radius: 999px;
        font-size: 0.8rem;
        font-weight: 600;
        text-transform: capitalize;
      }

      .status.found {
        background: rgba(56, 242, 167, 0.2);
        color: var(--success);
      }

      .status.not-found {
        background: rgba(255, 95, 122, 0.2);
        color: var(--danger);
      }

      .status.checking {
        background: rgba(251, 191, 36, 0.2);
        color: var(--warning);
      }

      .filter-toggle {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
      }

      .filter-toggle button {
        padding: 8px 12px;
        border-radius: 999px;
        border: 1px solid rgba(154, 163, 178, 0.3);
        background: transparent;
        color: var(--muted);
        cursor: pointer;
      }

      .filter-toggle button.active {
        border-color: rgba(110, 231, 255, 0.7);
        color: var(--brand);
        background: rgba(110, 231, 255, 0.1);
      }

      .footer-note {
        color: var(--muted);
        font-size: 0.9rem;
      }

      @media (max-width: 720px) {
        .search-controls {
          grid-template-columns: 1fr;
        }

        .result-card {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <header>
      <span class="badge">SearchIt · AI Username Search</span>
      <h1>AI-assisted search for a username across social platforms.</h1>
      <p class="lead">
        Enter a handle and let the assistant scan popular social media sites,
        developer hubs, and creator communities. The AI layer summarizes your
        reach, highlights likely matches, and suggests next steps.
      </p>
    </header>

    <main>
      <section class="search-panel">
        <div class="search-controls">
          <input
            id="username-input"
            type="text"
            placeholder="Enter a username (ex: yourhandle)"
            aria-label="Username"
          />
          <button id="search-button" type="button">Start AI Search</button>
        </div>

        <div class="toggle-row">
          <label>
            <input id="deep-scan" type="checkbox" checked />
            Deep scan (slower, more detail)
          </label>
          <label>
            <input id="include-dev" type="checkbox" checked />
            Include developer communities
          </label>
          <label>
            <input id="include-creator" type="checkbox" checked />
            Include creator platforms
          </label>
        </div>

        <div class="metrics">
          <div class="metric-card">
            <span>Websites scanned</span>
            <strong id="scanned-count">0</strong>
          </div>
          <div class="metric-card">
            <span>Found matches</span>
            <strong id="found-count">0</strong>
          </div>
          <div class="metric-card">
            <span>Not found</span>
            <strong id="not-found-count">0</strong>
          </div>
          <div class="metric-card">
            <span>Search runtime</span>
            <strong id="runtime">00:00</strong>
          </div>
        </div>

        <div class="ai-panel">
          <h3>AI Summary</h3>
          <ul class="ai-insights" id="ai-insights">
            <li>Run a search to generate AI insights.</li>
          </ul>
        </div>

        <div class="filter-toggle" role="group" aria-label="Result filters">
          <button type="button" class="active" data-filter="all">All</button>
          <button type="button" data-filter="found">Found</button>
          <button type="button" data-filter="not-found">Not found</button>
        </div>
      </section>

      <section class="results-panel">
        <div class="results-header">
          <h2>Search Results</h2>
          <div class="sort-controls">
            <label for="sort-select">Sort:</label>
            <select id="sort-select">
              <option value="status">Found → Not Found</option>
              <option value="alpha">Alphabetical</option>
            </select>
          </div>
        </div>
        <div class="results-grid" id="results-grid"></div>
        <p class="footer-note">
          AI detection uses lightweight heuristics and public signals. Verify any
          results directly on each platform before taking action.
        </p>
      </section>
    </main>

    <script>
      const siteCatalog = [
        {
          site: "Instagram",
          template: "instagram.com/{username}",
          foundDetail: "Profile, stories, or tagged posts detected.",
          missingDetail: "No public profile detected.",
          groups: ["creator"],
        },
        {
          site: "TikTok",
          template: "tiktok.com/@{username}",
          foundDetail: "Short-form video page found.",
          missingDetail: "No profile detected.",
          groups: ["creator"],
        },
        {
          site: "YouTube",
          template: "youtube.com/@{username}",
          foundDetail: "Channel page accessible.",
          missingDetail: "No channel page found.",
          groups: ["creator"],
        },
        {
          site: "Twitch",
          template: "twitch.tv/{username}",
          foundDetail: "Channel page is live.",
          missingDetail: "No channel page found.",
          groups: ["creator"],
        },
        {
          site: "Pinterest",
          template: "pinterest.com/{username}",
          foundDetail: "Boards and pins were indexed.",
          missingDetail: "No profile data found.",
          groups: ["creator"],
        },
        {
          site: "GitHub",
          template: "github.com/{username}",
          foundDetail: "Profile found with repositories.",
          missingDetail: "No profile located.",
          groups: ["dev"],
        },
        {
          site: "Stack Overflow",
          template: "stackoverflow.com/users/{username}",
          foundDetail: "Reputation activity visible.",
          missingDetail: "No user record.",
          groups: ["dev"],
        },
        {
          site: "Hacker News",
          template: "news.ycombinator.com/user?id={username}",
          foundDetail: "User history detected.",
          missingDetail: "No user activity.",
          groups: ["dev"],
        },
        {
          site: "Dribbble",
          template: "dribbble.com/{username}",
          foundDetail: "Design portfolio detected.",
          missingDetail: "No designer found.",
          groups: ["creator"],
        },
        {
          site: "Behance",
          template: "behance.net/{username}",
          foundDetail: "Portfolio page detected.",
          missingDetail: "No portfolio matches.",
          groups: ["creator"],
        },
        {
          site: "Reddit",
          template: "reddit.com/u/{username}",
          foundDetail: "Reddit user profile found.",
          missingDetail: "Username unclaimed.",
          groups: ["social"],
        },
        {
          site: "X (Twitter)",
          template: "x.com/{username}",
          foundDetail: "Profile timeline visible.",
          missingDetail: "No profile found.",
          groups: ["social"],
        },
        {
          site: "Facebook",
          template: "facebook.com/{username}",
          foundDetail: "Profile or page detected.",
          missingDetail: "Profile unavailable.",
          groups: ["social"],
        },
        {
          site: "LinkedIn",
          template: "linkedin.com/in/{username}",
          foundDetail: "Professional profile found.",
          missingDetail: "No public profile found.",
          groups: ["social"],
        },
        {
          site: "Snapchat",
          template: "snapchat.com/add/{username}",
          foundDetail: "Public profile visible.",
          missingDetail: "No public profile found.",
          groups: ["social"],
        },
      ];

      const resultsGrid = document.getElementById("results-grid");
      const sortSelect = document.getElementById("sort-select");
      const filterButtons = document.querySelectorAll(".filter-toggle button");
      const foundCount = document.getElementById("found-count");
      const notFoundCount = document.getElementById("not-found-count");
      const scannedCount = document.getElementById("scanned-count");
      const usernameInput = document.getElementById("username-input");
      const searchButton = document.getElementById("search-button");
      const runtimeDisplay = document.getElementById("runtime");
      const insightsList = document.getElementById("ai-insights");
      const deepScanToggle = document.getElementById("deep-scan");
      const includeDevToggle = document.getElementById("include-dev");
      const includeCreatorToggle = document.getElementById("include-creator");

      let results = [];
      let timerId;
      let elapsedSeconds = 0;

      const sortOrder = {
        found: 0,
        "not-found": 1,
        checking: 2,
      };

      const updateRuntime = () => {
        const minutes = String(Math.floor(elapsedSeconds / 60)).padStart(2, "0");
        const seconds = String(elapsedSeconds % 60).padStart(2, "0");
        runtimeDisplay.textContent = `${minutes}:${seconds}`;
      };

      const renderResults = () => {
        const activeFilter =
          document.querySelector(".filter-toggle button.active")?.dataset.filter ||
          "all";
        const sortMode = sortSelect.value;

        const filtered = results.filter((item) =>
          activeFilter === "all" ? true : item.status === activeFilter
        );

        const sorted = [...filtered].sort((a, b) => {
          if (sortMode === "alpha") {
            return a.site.localeCompare(b.site);
          }
          return sortOrder[a.status] - sortOrder[b.status];
        });

        resultsGrid.innerHTML = sorted
          .map(
            (item) => `
          <article class="result-card">
            <div>
              <h3>${item.site}</h3>
              <p>${item.handle}</p>
              <p>${item.detail}</p>
            </div>
            <span class="status ${item.status}">${item.status.replace("-", " ")}</span>
          </article>
        `
          )
          .join("");

        const foundTotal = results.filter((item) => item.status === "found").length;
        const notFoundTotal = results.filter(
          (item) => item.status === "not-found"
        ).length;
        foundCount.textContent = foundTotal;
        notFoundCount.textContent = notFoundTotal;
      };

      const buildResults = (username) => {
        const allowDev = includeDevToggle.checked;
        const allowCreator = includeCreatorToggle.checked;

        const filteredCatalog = siteCatalog.filter((site) => {
          if (site.groups.includes("dev") && !allowDev) {
            return false;
          }
          if (site.groups.includes("creator") && !allowCreator) {
            return false;
          }
          return true;
        });

        return filteredCatalog.map((site) => ({
          site: site.site,
          handle: site.template.replace("{username}", username),
          status: "checking",
          detail: "Scanning source…",
          siteMeta: site,
        }));
      };

      const extractStatusCode = (text) => {
        const match = text.match(/status:\\s*(\\d{3})/i);
        return match ? Number.parseInt(match[1], 10) : null;
      };

      const isNotFoundResponse = (text, statusCode) => {
        const normalized = text.toLowerCase();
        return (
          statusCode === 404 ||
          normalized.includes("status: 404") ||
          normalized.includes("404 not found") ||
          normalized.includes("page not found") ||
          normalized.includes("user not found") ||
          normalized.includes("profile not found")
        );
      };

      const checkSite = async (item) => {
        const targetUrl = `https://${item.handle}`;
        const proxyUrl = `https://r.jina.ai/http://${item.handle}`;
        try {
          const response = await fetch(proxyUrl, { cache: "no-store" });
          const body = await response.text();
          const statusCode = extractStatusCode(body);
          const statusIsValid = statusCode !== null ? statusCode < 400 : response.ok;
          const found = statusIsValid && !isNotFoundResponse(body, statusCode);
          return {
            ...item,
            status: found ? "found" : "not-found",
            detail: found ? item.siteMeta.foundDetail : item.siteMeta.missingDetail,
          };
        } catch (error) {
          return {
            ...item,
            status: "not-found",
            detail: "Request failed or blocked.",
          };
        }
      };

      const startTimer = () => {
        clearInterval(timerId);
        elapsedSeconds = 0;
        updateRuntime();
        timerId = setInterval(() => {
          elapsedSeconds += 1;
          updateRuntime();
        }, 1000);
      };

      const stopTimer = () => {
        clearInterval(timerId);
      };

      const buildInsights = () => {
        if (!usernameInput.value.trim()) {
          insightsList.innerHTML =
            "<li>Enter a username to generate AI insights.</li>";
          return;
        }
        const foundItems = results.filter((item) => item.status === "found");
        const notFoundItems = results.filter((item) => item.status === "not-found");
        const deepScan = deepScanToggle.checked;

        const insights = [];
        if (foundItems.length === 0) {
          insights.push(
            "No strong matches yet. Consider variations (add a suffix or underscore)."
          );
        } else {
          insights.push(
            `Found ${foundItems.length} likely matches. Prioritize high-visibility sites first.`
          );
        }

        if (notFoundItems.length > 0) {
          insights.push(
            `Missing on ${notFoundItems.length} platforms. This could indicate brand availability.`
          );
        }

        if (deepScan) {
          insights.push(
            "Deep scan is enabled: expect more accurate results but longer runtimes."
          );
        } else {
          insights.push("Quick scan enabled: consider deep scan for higher confidence.");
        }

        if (includeDevToggle.checked && includeCreatorToggle.checked) {
          insights.push(
            "Balanced scan across developer and creator communities for holistic coverage."
          );
        }

        insightsList.innerHTML = insights
          .map((text) => `<li>${text}</li>`)
          .join("");
      };

      const runSearch = async () => {
        const username = usernameInput.value.trim();
        if (!username) {
          results = [];
          scannedCount.textContent = "0";
          foundCount.textContent = "0";
          notFoundCount.textContent = "0";
          resultsGrid.innerHTML = "";
          insightsList.innerHTML =
            "<li>Enter a username to generate AI insights.</li>";
          stopTimer();
          runtimeDisplay.textContent = "00:00";
          return;
        }
        startTimer();
        results = buildResults(username);
        scannedCount.textContent = results.length;
        renderResults();
        buildInsights();

        let completed = 0;
        const checks = deepScanToggle.checked ? results : results.slice(0, 8);

        await Promise.all(
          checks.map(async (item, index) => {
            const resolved = await checkSite(item);
            results[index] = resolved;
            completed += 1;
            renderResults();
            buildInsights();
            if (completed === checks.length) {
              stopTimer();
            }
          })
        );
      };

      sortSelect.addEventListener("change", renderResults);
      filterButtons.forEach((button) => {
        button.addEventListener("click", () => {
          filterButtons.forEach((btn) => btn.classList.remove("active"));
          button.classList.add("active");
          renderResults();
        });
      });

      [deepScanToggle, includeDevToggle, includeCreatorToggle].forEach((toggle) => {
        toggle.addEventListener("change", () => {
          const currentUsername = usernameInput.value.trim();
          results = currentUsername ? buildResults(currentUsername) : [];
          scannedCount.textContent = results.length;
          renderResults();
          buildInsights();
        });
      });

      searchButton.addEventListener("click", runSearch);
      usernameInput.addEventListener("keydown", (event) => {
        if (event.key === "Enter") {
          runSearch();
        }
      });

      renderResults();
    </script>
  </body>
</html>
